// start of pipeline
pipeline {
  // where pipeline job will run
  agent {
    label "windows_slave"
  }
  tools {
  jdk "JDK"
  maven "maven"
  }
  stages {
    stage('build')
    {
      steps {
        bat 'mvn clean install'
      }
    }
    // start of deploy state
stage('deploy') {
   // define step to run
   step {
   // invoke commond to stop tomcat service
   bat 'sc stop Tomcat7'
   bat 'ping localhosts:8080 -n 6'
   // copy war file from build target to webapp Tomcat folder
   bat 'xcopy /y C:\\jenkins_slave\\workspace\\GOL_pipeline\\gameoflife-web\\target\\gameoflife.war "C:\\Program Files\\Apache Software Foundation\\Tomcat 7.0\\webapps"
   // invoke commond to start tomcat service"'
   bat 'sc start Tomcat7'
   }
  }
  
 }
}
